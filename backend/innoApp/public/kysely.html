<!DOCTYPE html>
<html lang="en">

<head>
    <title>Kysely</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
    <!-- CSS -->
    <link href="stylesheets/stylesheet.css" rel="stylesheet">
    <!-- Google fontit -->
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

</head>

<!-- Navigointi -->
<nav class="navbar navbar-inverse navbar-fixed-top nav-main">
    <div class="container-fluid">
        <div class="navbar-header">
            <a class="navbar-brand" href="index.html">Sun vuoro</a>
        </div>
        <ul class="nav navbar-nav">
            <li class="active"><a href="index.html">Etusivu</a></li>
            <li><a href="all_tasks.html">Kaikki tehtävät</a></li>
        </ul>
    </div>
</nav>

<body class="body">

<div class="space">
    <div class="text-center">
        <h3 class="text-light">
            Mitä tekemistä kaipaisit? Vedä palloja sen mukaan! (1 vähiten, 5 eniten)
        </h3>
        <p>
            Siirrä osoitin kuvien päälle jos tarvitset lisätietoja
        </p>
    </div>
</div>

 <!-- kuvien vaihtoscripti -->
  <script>
 function updateSlider(slideAmount) {
        if(slideAmount==1){
        	document.getElementById("fyysisyys").src = "https://i.imgur.com/HPiK6vw.png";
        }
        if(slideAmount==2){
        	document.getElementById("fyysisyys").src = "https://i.imgur.com/tNQnJSZ.png";
        }
        if(slideAmount==3){
        	document.getElementById("fyysisyys").src = "https://i.imgur.com/UsvKSy6.png";
        }
        if(slideAmount==4){
        	document.getElementById("fyysisyys").src = "https://i.imgur.com/XooCKpn.png";
        }
        if(slideAmount==5){
        	document.getElementById("fyysisyys").src = "https://i.imgur.com/Jm066HB.png";
        }
    }	
    function updateSlider2(slideAmount) {
        if(slideAmount==1){
        	document.getElementById("pulmanratkaisu").src = "https://i.imgur.com/9u3Tn8U.png";
        }
        if(slideAmount==2){
        	document.getElementById("pulmanratkaisu").src = "https://i.imgur.com/PoEqOtt.png";
        }
        if(slideAmount==3){
        	document.getElementById("pulmanratkaisu").src = "https://i.imgur.com/yfGUVOE.png";
        }
        if(slideAmount==4){
        	document.getElementById("pulmanratkaisu").src = "https://i.imgur.com/sihwuZo.png";
        }
        if(slideAmount==5){
        	document.getElementById("pulmanratkaisu").src = "https://i.imgur.com/DewUuhM.png";
        }
    }
    function updateSlider3(slideAmount) {
        if(slideAmount==1){
        	document.getElementById("seurallisuus").src = "https://i.imgur.com/UQiuWcC.png";
        }
        if(slideAmount==2){
        	document.getElementById("seurallisuus").src = "https://i.imgur.com/BhnLSEF.png";
        }
        if(slideAmount==3){
        	document.getElementById("seurallisuus").src = "https://i.imgur.com/Dy55kAS.png";
        }
        if(slideAmount==4){
        	document.getElementById("seurallisuus").src = "https://i.imgur.com/aT13XQw.png";
        }
        if(slideAmount==5){
        	document.getElementById("seurallisuus").src = "https://i.imgur.com/3ad2k1h.png";
        }
    }
		</script>
    
	<form>

        <br>
        <br>

    <script type="text/javascript">
        var xhr = new XMLHttpRequest();
        xhr.open("GET", "db/location", true)
        xhr.onload = () =>{
            if(xhr.readyState === 4){
                if(xhr.status === 200) {
                    console.log(xhr.responseText);
                    locations = JSON.parse(xhr.response);
                    locations.forEach(addLocation);
                    function addLocation(item, index) {
                        var locationOption = document.createElement("option");
                        locationOption.value = item.location_name;
                        locationOption.innerHTML = item.location_name;

                        var locationDropdown = document.getElementById("locationDropdown");
                        locationDropdown.appendChild(locationOption);
                    };
                } else {
                    console.error(xhr.statusText);
                }
            }
        }
        xhr.send();
    </script>

  <table align="center" style="width:100%">
        <tr>
          <th></th>
          <th style="text-align:center"><p class="valiotsikot">Fyysisyys</p></th>
          <th></th>
          <th style="text-align:center"><p class="valiotsikot">Pulmat</p></th> 
          <th></th>
          <th style="text-align:center"><p class="valiotsikot">Seura</p></th>
          <th></th>
        </tr>
        <tr>
          <td>&nbsp;</td>
          <td style="text-align:center"><div class="kuva1"><img src="https://i.imgur.com/UsvKSy6.png" id="fyysisyys">
          <span class="tooltiptext">Haluat kuntoa nostavaa, kehoa vahvistavaa tehtävää</span></div></td>
          <td></td>
          <td style="text-align:center"><div class="kuva2"><img src="https://i.imgur.com/yfGUVOE.png" id="pulmanratkaisu">
          <span class="tooltiptext">Haluat pohdintaa ja hoksottimia vaativaa tehtävää</span></div></td>
          <td></td>
          <td style="text-align:center"><div class="kuva3"><img src="https://i.imgur.com/Dy55kAS.png" id="seurallisuus">
          <span class="tooltiptext">Haluat olla muiden ihmisten kanssa tekemässä</span></div></td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>&nbsp;</td>
          <td style="text-align:center"><input type="text" readonly="true" size="1" class="aligncentersmall criteriavalue"  name="amountInput" min="1" max="5" value="3" oninput="this.form.amountRange.value=this.value" /></td>
          <td></td>
          <td style="text-align:center"><input type="text" readonly="true" size="1" class="aligncentersmall criteriavalue" name="amountInput2" min="1" max="5" value="3" oninput="this.form.amountRange2.value=this.value" /></td>
          <td></td>
          <td style="text-align:center"><input type="text" readonly="true" size="1" class="aligncentersmall criteriavalue" name="amountInput3" min="1" max="5" value="3" oninput="this.form.amountRange3.value=this.value" /></td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>&nbsp;</td>
          <td><input type="range" size="5" class="slider" name="amountRange" min="1" max="5" value="3" onchange="updateSlider(this.value)" oninput="this.form.amountInput.value=this.value; updateSlider(this.value)" /></td>
          <td>&nbsp;&nbsp;</td>
          <td><input type="range" size="5" class="slider" name="amountRange2" min="1" max="5" value="3" onchange="updateSlider2(this.value)" oninput="this.form.amountInput2.value=this.value; updateSlider2(this.value)" /></td>
          <td>&nbsp;&nbsp;</td>
          <td><input type="range" size="5" class="slider" name="amountRange3" min="1" max="5" value="3" onchange="updateSlider3(this.value)" oninput="this.form.amountInput3.value=this.value; updateSlider3(this.value)" /></td>
          <td>&nbsp;</td>
        </tr>      
  </table style="width:100%">
    <script type="text/javascript">
        function haeOnClick() {
            var fyysisyysSlider = document.getElementsByName("amountRange");
            var pulmanratkaisuSlider = document.getElementsByName("amountRange2");
            var seurallisuusSlider = document.getElementsByName("amountRange3");
            var results = {ajattelu_value:pulmanratkaisuSlider[0].value, fysiikka_value:fyysisyysSlider[0].value, sosiaalisuus_value:seurallisuusSlider[0].value};
            //Store results in local storage for transfer to results site
            //LocalStorage can't store objects so we turn them to JSON
            localStorage.setItem("results",JSON.stringify(results));
            localStorage.setItem("location",document.getElementById("locationDropdown").value);

            var xhr = new XMLHttpRequest();

            //Store results to db so we can collect big data and get an idea what kind of tasks people are looking for
            xhr.open("POST", "db/results/"+fyysisyysSlider[0].value+"&"+pulmanratkaisuSlider[0].value+"&"+seurallisuusSlider[0].value, true)
            xhr.onload = () =>{
                if(xhr.readyState === 4){
                    if(xhr.status === 200) {
                        console.log(xhr.responseText);
                        window.location.href = "results.html";
                    } else {
                        console.error(xhr.statusText);
                    }
                }
            }
            xhr.send();
        }
    </script>

        <br>
        <br>

        <div class="filter-container">
            <p> <font size="5">Sijainti:&nbsp;&nbsp;</font></p>
            <select id="locationDropdown" class="black-text">
                <option value="kaikki" selected>Kaikki</option>
                <!-- Get options from db-->
            </select>
        </div>
     <p align="center">
     <br>
      <!--<a href="results.html">--><button type="button" class="button" onclick="haeOnClick()">HAE!</button><!--</a>-->
     </p>

        <br>
        <br>
        <br>
        <br>

	</form>

    <!-- Intro/lisätieto -->
    <section class="intro">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2">
                    <h2 class="section-heading">Lisätietoja</h2>
                    <p>Fyysisyys – Kaipaat kuntoa vaativaa tekemistä, jossa esimerkiksi kannetaan puita, huonekaluja tai tehdään käsillä.</p>
                    <p>Pulmat – Kaipaat pohdintaa ja hoksottimia vaativia tehtäviä kuten kassalla toimimista, nikkarointia tai toimiston puolella toimimista.</p>
                    <p>Seura – Kaipaat muiden seuraa ja haluat toimia ihmisten kanssa esimerkiksi asiakaskohtaamisissa, ryhmätöissä tai olla oppaana.</p>
                </div>
            </div>
        </div>
    </section>


<!-- Footer -->
<footer class="page-footer">

    <!-- Kontaktitieto -->
    <div class="contact">
        <div class="container">
            <h2 class="section-heading">Ota yhteyttä</h2>
            <p><span class="glyphicon glyphicon-earphone"></span> 040 123456789</p>
            <p><span class="glyphicon glyphicon-envelope"></span> info@esimerkki.com</p>
            <a href="ammattilaiselle.html">Ammattilaiselle</a>
        </div>
    </div>

    <!-- Copyright jne
    <div class="small-print">
        <div class="container">
            <p>Copyright</p>
        </div>
    </div>
    -->

    <div class="logos">
        <div class="container">
            <img src="images/logos/EU_ESR_FI_vertical_20mm_rgb.png">
            <img src="images/logos/HVTlogoRGBtaustaton.png">
            <img src="images/logos/Metropolia_RGB_A.png">
            <img src="images/logos/VipuvoimaaEU_2014_2020_rgb.png">
            <img src="images/logos/saimia_logo.png">
            <img src="images/logos/SJK_ko_vaakaCMYK_trans.png">
            <img src="images/logos/logo_hr.png">
            <img src="images/logos/ljlp_ilkmok-18.png">
        </div>
    </div>

</footer>
</body>